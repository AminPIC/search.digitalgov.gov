<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Posts tagged about-us</title>
  <meta name="description" content="">
  <meta name="author" content="">
  <link href="https://fonts.googleapis.com/css?family=Maven+Pro:400,700" media="screen" rel="stylesheet" type="text/css" />
  <link href="/bootstrap/css/bootstrap.css" rel="stylesheet">
  <link rel="stylesheet" href="/stylesheets/font-awesome.min.css">
  <!--[if IE 7]>
  <link rel="stylesheet" href="/stylesheets/font-awesome-ie7.min.css">
  <![endif]-->

  <!--<link href="../assets/css/bootstrap-responsive.css" rel="stylesheet">-->
  <link href="/stylesheets/custom.css" rel="stylesheet">

  <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
  <!--[if lt IE 9]>
  <script src="/javascripts/html5shiv.js"></script>
  <![endif]-->

  <!-- Fav and touch icons -->
  <!--  <link rel="apple-touch-icon-precomposed" sizes="144x144"
          href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114"
          href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72"
          href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">-->
  <link rel="shortcut icon" href="https://9fddeb862c037f6d2190-f1564c64756a8cfee25b6b19953b1d23.ssl.cf2.rackcdn.com/favicon.ico">
  <link rel='alternate' type='application/atom+xml' title='usasearch.howto.gov Atom feed' href='/all.atom' />
</head>

<body>
<div class="navbar navbar-inverse navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="brand" href="/">
        <span class="digital">Digital</span><span class="gov">Gov</span>
        <span class="search">Search</span>
      </a>
      <ul class="nav">
        <li>
          <form class="form-search" accept-charset="UTF-8" action="http://search.usa.gov/search/news/" id="search-form" method="get">
            <input id="affiliate" name="affiliate" type="hidden" value="usasearch"/>
            <input type="hidden" name="channel" value="1745">
            <input type="hidden" name="sort_by" value="r">
            <input type="hidden" name="m" value="true">
            <div class="input-append">
              <label for="search-query" class="hide">Query</label>
              <input name="query" type="text" autocomplete="off"
                     class="usagov-search-autocomplete span search-query" id="search-query"/>
              <input type="submit" class="btn" id="search-button" value="Search" />
            </div>
          </form>
        </li>
      </ul>
      <ul class="nav login">
        <li>
          <a href="https://search.usa.gov/sites"><i
              class="icon-user icon-white"></i>&nbsp;Login</a>
        </li>
      </ul>
    </div>
  </div>
</div>


<div class="container">
  <div id="main-container"><!-- begin tag layout -->
<p class="muted">Posts tagged <strong>about-us</strong></p>
<div class='articles'>
  
  <article class='article'>
 
    
    <h1>
      <a href="/blog/hadoop-bigger-ox.html">I Didn't Try to Grow a Bigger Ox:  How I Found Hadoop</a>
    </h1>
    

    <div class='post-content'>
      <p>A year ago I rolled my first Hadoop system into production. Since then, I've spoken to quite a few people who are eager to try Hadoop themselves in order to solve their own big data problems. Despite having similar backgrounds and data problems, few of these people have sunk their teeth into Hadoop. When I go to Hadoop Meetups in San Francisco, I often meet new people who are evaluating Hadoop and have yet to launch a cluster. Based on my own background and experience, I have some ideas on why this is the case.</p>

<p>I studied computer science in school and have worked on a wide variety of computer systems in my career, with a lot of focus on server-side Java. I learned a bit about building distributed systems and working with large amounts of data when I built a pay-per-click (PPC) ad network in 2004. The system is still in operation and at one point was handling several thousand searches per second. As the sole technical resource on the system, I had to educate myself very quickly about how to scale up.</p>

<p>As I contemplated how doomed I would be should traffic levels increase much more, I remember wondering to myself, "How does Google deal with all that data?" The answer came to me in the form of the Google File System (GFS) paper and later the MapReduce paper, both from Google. It dawned on me that because Google was forced to solve a much larger problem, they had come up with an elegant solution for a whole range of more modest data problems running on commodity hardware. But it wouldn't be until 2010 that I would get to work with this technology firsthand.</p>

<p>As I wrote in an <a href="/blog/adopting-hadoop.html">earlier article</a>, I started re-architecting DigitalGov Search, the U.S. government's search system, in 2009 based on a solution stack of free, open source software including Ruby on Rails, Solr, and MySQL. A wave of déja vu hit me as I started worrying about what to do with the growing mountain of data piling up in MySQL and our increasing need to analyze it in different ways. I had heard that a new company called Cloudera, founded by some big data people from Yahoo!, Google, and Facebook, was making Hadoop available for the masses in a reliable distribution, much in the same way that RedHat did for Linux. Curiosity got the best of me and I bought the newly minted <em>Hadoop: The Definitive Guide</em> from O'Reilly. The most insightful part of the book to me was the very first sentence. It's a quote from Grace Hopper: "In pioneer days, they used oxen for heavy pulling, and when one ox couldn't budge a log, they didn't try to grow a bigger ox." I didn't want to grow a bigger server; I wanted to harness a bunch of small servers together to work in unison. The more I learned the more curious I got, so I started reading more. And that's when I hit my first roadblock.</p>

<p>I think people who have been working with Hadoop technologies for years and years sometimes forget just how rich and diverse the big data software ecosystem has become, and how daunting it can be to folks approaching it for the first time. When people at the Meetups say they are evaluating solutions to their data scaling problem, the answers they hear sound something like this: "Just use Hadoop Hive Pig Mahout Avro HBase Cassandra Oozie Sqoop Flume ZooKeeper Cascading NoSQL RCFile. Oh, almost forgot…cloud."</p>

<p>The thought of wading through all of that just to learn about what I needed to learn about was a bit too overwhelming for me, so I put the whole matter aside for a few months. Over time, I started to dive into each of these projects to understand the primary use case, how active the developer community was and which organizations were using it in production. I converged on the idea of using Hive as a warehouse for our data. I opted for Cloudera's distribution since I wanted to reduce the risk of running into compatibility issues between all the various subsystems. Having tracked down anomalies in a highly multi-threaded and contentious distributed Java system before, I liked the idea of someone else taking on that problem for me.</p>

<p>At some point, I had read everything I could read and grew impatient to get my hands dirty, so I decided to just download CDH3 on my laptop and give it a try. The tutorial instructions for the standalone version worked, and I successfully computed more digits of pi than I ever thought I'd need. After creating some sample data in Hive and running a few queries, I felt pretty confident that Hive would be the right tool for the job. I just needed to find somewhere to install and run HDFS (namenode, secondary namenode, and data nodes), Hadoop (jobtracker and tasktracker nodes), Hive, and Hue for a nice front end to it all.</p>

<p>I knew from my past experience how to stretch the limits of CPU, disk, IO, and memory on commodity servers, and I identified a few potential servers at our primary datacenter with resources I figured I could leverage. Once again I followed the tutorial instructions, this time for the fully distributed version of CDH3, and once again I started to compute pi. And that's when I hit my second roadblock. It took me a few days to figure out that I had a problem with DNS. Each machine needs to be able to resolve every other machine's name and IP in the cluster. Whether you do that via /etc/hosts or a local DNS server is up to you, but it needs to happen or the whole thing gets wedged. Once I got that sorted out, everything just started falling into place and I had Hive working in production within a few days. A week later, I started pulling out the MySQL jobs and deleting big tables, and that's been the trend ever since.</p>

<p>Over time, I've gone on to learn about using custom Ruby mappers in Hive, moving data back and forth between MySQL and Hive with Sqoop, and getting the data into HDFS in real-time with Flume. All of these components from the Cloudera distribution are working nicely in our production environment now, and I sleep well at night knowing I have such a solid, deliberate plan for growth. My initial investment in learning about the Hadoop ecosystem is really paying dividends, but when I think about all those people at the Meetups stuck in evaluation mode, I feel their pain. Does it have to be such a struggle?</p>

<p>The big challenge in my opinion is not that any one piece of the puzzle is too difficult. Any reasonably smart (or in my case stubborn) engineer can set themselves on the task of learning about a new technology once they know that it needs to be learned. The challenge with the Hadoop ecosystem is that it presents the newbie with the meta-problem of figuring out which of these tools are appropriate for their use case at all, and whether or not to even consider the problem today versus deferring it until later. In a way Facebook has it easy, because when you are adding 15TB of data per day, that decision is pretty much made for you.</p>

<p>For all the companies sitting in the twilight between the gigabyte and the petabyte who don't have Hadoop expertise in-house, there is a collection of free information to help guide people to the right solution space (Hadoop Tutorial, White Papers). These days, when I talk to people who are evaluating solutions to their big data problems, my advice to them is to break down their problems into a few discrete use cases and then work on ferreting out the technologies that are designed for that use case. Get a proof of concept to demonstrate that the technology can address your use case and convince yourself and others that you're on the right track. Work toward putting something simple into production. Lather, rinse, and repeat. I am still in that cycle myself, as these days I'm exploring HBase and OpenTSDB to give me low-latency access to time series data and Mahout to do frequent item set mining, but that's another article for another day.</p>

<p><strong><em>This post is cross-posted from <a href="http://www.cloudera.com/blog/2011/12/how-i-found-hadoop/">Cloudera</a>.&nbsp;<i class="icon-external-link"><span>(External link)</span></i></em></strong></p>

    </div>

    <div class='tags'>
      
      <a href="/tagged/analytics"><span class="label label-info">analytics</span></a>
      
      <a href="/tagged/about-us"><span class="label label-info">about-us</span></a>
      
    </div>
   <div class='time'>
      
      
      
      </br><span>Page last reviewed or updated:</span>
      
      <a href="/blog/hadoop-bigger-ox.html">
        <time datetime="2014-03-06">March 6, 2014</time>
      </a>
    </div>
    </article>
  
  <article class='article'>
 
    
    <h1>
      <a href="/blog/cache.html">Cache Me If You Can</a>
    </h1>
    

    <div class='post-content'>
      <h2>Slowness Hurts Web Pages</h2>

<p>Have you ever been frustrated when visiting a web page that doesn't load quickly? Have you ever left a slow web page before it finished loading? You're not alone.</p>

<p>Several recent studies have quantified customers' frustration with slow web pages. Customers now  <a href="http://www.nytimes.com/2012/03/01/technology/impatient-web-users-flee-slow-loading-sites.html">expect results in the blink of an eye</a>.&nbsp;<i class="icon-external-link"><span>(External link)</span></i> This expection means that your <a href="http://www.aberdeen.com/Aberdeen-Library/5136/RA-performance-web-application.aspx">customers are won or lost in one second</a>.&nbsp;<i class="icon-external-link"><span>(External link)</span></i> A one second delay in loading a web page equals 11% fewer page views, 16% decrease in customer satisfaction, and 7% loss in conversions.</p>

<h2>Slowness <em>Kills</em> Search Results Pages</h2>

<p>As little time as web sites have to keep users on their pages, search engines have even less time to keep searchers on their results pages. Speed is the primary factor in determining customers' satisfaction with search results.</p>

<p>Google, Microsoft, and Yahoo garner <a href="http://www.comscore.com/Insights/Press_Releases/2013/11/comScore_Releases_October_2013_US_Search_Engine_Rankings">95% of the search market</a>.&nbsp;<i class="icon-external-link"><span>(External link)</span></i> Google garners two-thirds of the search market. The company's <a href="https://www.google.com/search?q=Google+Gospel+of+Speed">Gospel of Speed</a>&nbsp;<i class="icon-external-link"><span>(External link)</span></i> motto is one reason why Google garners the majority of the market.</p>

<p>This gospel has also set a high bar for all search engines. Searchers expect results pages to load very, very quickly.</p>

<h2>How We've Made Our Result Pages Load Faster</h2>

<p>So, when we established the service's open source architecture in 2010, the first thing we tackled was how to deliver our search results in under one second.</p>

<p>At around the same time, <a href="http://www.github.com">Github</a>&nbsp;<i class="icon-external-link"><span>(External link)</span></i> was experiencing exponential growth and the company's engineers were blogging about what they did to make Github fast. To get up to speed quickly (yes, bad pun intended), we read their posts.</p>

<ul>
<li><a href="https://github.com/blog/530-how-we-made-github-fast">How We Made GitHub Fast</a>&nbsp;<i class="icon-external-link"><span>(External link)</span></i>, October 20, 2009</li>
<li><a href="https://github.com/blog/1252-how-we-keep-github-fast">How We Keep GitHub Fast</a>&nbsp;<i class="icon-external-link"><span>(External link)</span></i>, September 5, 2012</li>
</ul>


<p>Leveraging some of Github's best practices, we succeeded in delivering our results in under 700 milliseconds, on average. This was a significant accomplishment and improvement from the previous vendor-owned and -operated iterations of our service.</p>

<p>Over the past three years, we've dug in and improved our response time even more. We now deliver our results in under 380 milliseconds, on average.</p>

<p><img src="https://9fddeb862c037f6d2190-f1564c64756a8cfee25b6b19953b1d23.ssl.cf2.rackcdn.com/serp_reponse_times.png" title="App server response times" alt="App server response times" /></p>

<p>We already had an architecture optimized for speed. So, how have we sped it up by 320 milliseconds?</p>

<h3>We Cache When We Can</h3>

<p>When a searcher enters a query, we go out to our various indexes, pull the information relevant to the searcher's request, and put that information together on the results page.</p>

<p>Most queries (such as jobs, obama, unclaimed money, forms) aren't unique and are asked by thousands of searchers each day.</p>

<p>We cache these so-called short head queries and store them on our servers. Caching helps us speed up the above process because searchers don't have to wait for us to pull the information from its original source.</p>

<h3>We Use an Asset Pipeline</h3>

<p>We have many JavaScript and CSS files on our results pages. These "assets" can be large and slow down the loading of our page. So, we use an <a href="http://guides.rubyonrails.org/asset_pipeline.html">asset pipeline</a>&nbsp;<i class="icon-external-link"><span>(External link)</span></i> to concatenate and compress our JavaScript and CSS assets thereby reducing the number of requests that a browser has to make to render our results page.</p>

<p>We also use fingerprinting&mdash;a technique that makes a file's name dependent on its content&mdash;within our asset pipeline. When the content changes, the name changes. For content that is static or that changes infrequently, this naming helps us tell whether two versions of a file are identical. When a filename is unique, browsers keep their own copy of the content. When the content is updated, the fingerprint changes so browsers request a new copy of the content. This approach allows us to maximize our content delivery network.</p>

<h3>We Use a Content Delivery Network</h3>

<p>Our static content (such as scripts and stylesheets) gets served through our <a href="http://www.webopedia.com/TERM/C/CDN.html">content delivery network</a>&nbsp;<i class="icon-external-link"><span>(External link)</span></i> provider, currently Akamai. Akamai serves our static content from its server that is geographically closest to the searcher. The closer, the faster.</p>

<p>Using a content delivery network also allow us to optimize our service's speed by:</p>

<ul>
<li>Directing non-cached traffic between our two datacenters to create a <a href="/releases/2012-10-19.html">multihomed environment</a>. Multihoming allows us to make full use of all of our servers. By contrast, in 2010, our disaster recovery datacenter often sat idle.</li>
<li>Reducing our need to add bandwidth or servers to handle short-term traffic spurts, such as spurts related to natural disasters.</li>
<li>Protecting against denial of service attacks by spotting them before they reach our servers.</li>
</ul>


<h2>What's Next?</h2>

<p>We've worked hard over the past three years to speed up the delivery of our results by optimizing each link in the chain.</p>

<p>We use several monitoring tools to measure our system's performance. The quality of these tools is improving at a rapid pace, which in turn, shows us where and how we can improve our service.</p>

<p>We regularly ask ourselves, "Will <em>this</em> shave some time off and help us deliver our results in <em>under</em> 380 milliseconds?"</p>

    </div>

    <div class='tags'>
      
      <a href="/tagged/cache"><span class="label label-info">cache</span></a>
      
      <a href="/tagged/architecture"><span class="label label-info">architecture</span></a>
      
      <a href="/tagged/about-us"><span class="label label-info">about-us</span></a>
      
    </div>
   <div class='time'>
      
      
      
      </br><span>Page last reviewed or updated:</span>
      
      <a href="/blog/cache.html">
        <time datetime="2013-12-09">December 9, 2013</time>
      </a>
    </div>
    </article>
  
  <article class='article'>
 
    
    <h1>
      <a href="/blog/open-source.html">Our Open Source Strategy</a>
    </h1>
    

    <div class='post-content'>
      <p>We keep an eye on on our what our government counterparts are up to, both in the U.S. and other countries. We recently came across <a href="https://www.gov.uk">Gov.UK's</a> philosophy on and approach to <a href="http://digital.cabinetoffice.gov.uk/2012/10/12/coding-in-the-open">coding in the open</a>. It caught our attention and we realized we should also articulate our open source strategy.</p>

<h2>Use and Contribute to Open Source Projects</h2>

<p>Since 2010, we've embraced and leveraged open source software to build our site search service for federal, state, and local government websites. This use of open source has allowed us to experience enormous growth over the past few years. In March 2013 alone, over 24 million searchers received results from our service&mdash;a four-fold increase since March 2010.</p>

<p>Our search service is now a complex system made up of many moving parts, including providing type-ahead search suggestions, serving search results, fetching, indexing, and caching content, and providing analytics.</p>

<p>Each of these parts is compiled into our codebase and, as we use open source components for our system, we contribute back to the projects.</p>

<h2>Code in the Open</h2>

<p>We recently began to unravel our monolithic codebase so that we can share individual pieces of our code. To borrow the phrase from Gov.UK, we're now <strong><em>coding in the open</em></strong>.</p>

<p>We recently released the code for our <a href="https://github.com/GSA/jobs_api">Jobs</a> and <a href="https://github.com/GSA/recalls_api">Recalls</a> API servers. They're our first foray into coding in the open. The source code for these API servers is in <a href="https://github.com/GSA">our GitHub repo</a> and is available for anyone to see and contribute to.</p>

<p>The data products for this code are also open and available for anyone to consume on our <a href="/developer/index.html">Developer hub</a>.</p>

<p>These two servers and their underlying data now operate outside of our core search codebase.</p>

<p>Following this same model, moving forward, we plan to:</p>

<ul>
<li><p>Share first&mdash;For every new feature, we'll write the code so that <em>anyone</em> can make use of the code, not just us. If the public community contributes to the codebase, we'll be able to improve this feature without taxing our developers.</p></li>
<li><p>Expose APIs&mdash;We'll expose our data products as APIs so that <em>anyone</em> can make use of the data, not just searchers on a government websites.</p></li>
<li><p>Be our own customer&mdash;We'll use our own public code and data just like everyone else. We'll call our own API servers to integrate the data within our search results pages.</p></li>
</ul>


<h2>Make Things Open to Make Things Better</h2>

<p>We agree with Gov.UK that "to make things open makes things better."</p>

<p>We have finite resources and we don't want to lose our focus on serving our agency customers and improving visitors' search experience on government websites. So, we won't be spending a lot of time to build or support a vibrant community around our code.</p>

<p>That said, we hope that exposing the pieces of our system will be useful to someone somewhere. We'll continue to provide the "ingredients" of our search service so that others will be able to make use of the code and data in ways that we could never imagine.</p>

<h2>And, We're Not Alone</h2>

<p>We're not alone. Other federal agencies have embraced the approach of coding in the open and have <a href="http://gsa.github.io/federal-open-source-repos">GitHub repos</a>. Below are a just a few of our many favorites.</p>

<ul>
<li><p>The Consumer Finance Protection Bureau has embraced open source, including serving their public data sets through <a href="https://github.com/cfpb/qu">qu</a>.</p></li>
<li><p>USA.gov recently released the code for their <a href="https://github.com/usagov/usagov-ios-app">iPhone app</a>.</p></li>
<li><p>The White House was in the forefront of using open source software in the federal government with their use of Drupal. They're continuing to lead by example by opening up the code for their <a href="https://github.com/WhiteHouse/petitions">We the People petitions</a> and <a href="https://github.com/WhiteHouse/wh-app-ios">iOS</a> and <a href="https://github.com/WhiteHouse/wh-app-android">Android</a> mobile apps.</p></li>
</ul>


    </div>

    <div class='tags'>
      
      <a href="/tagged/open"><span class="label label-info">open</span></a>
      
      <a href="/tagged/api"><span class="label label-info">api</span></a>
      
      <a href="/tagged/about-us"><span class="label label-info">about-us</span></a>
      
    </div>
   <div class='time'>
      
      
      
      </br><span>Page last reviewed or updated:</span>
      
      <a href="/blog/open-source.html">
        <time datetime="2013-04-20">April 20, 2013</time>
      </a>
    </div>
    </article>
  
  <article class='article'>
 
    

    <div class='post-content'>
      <p>Gartner recently published a very positive case study on DigitalGov Search (formerly USASearch), <em><a href="http://www.gartner.com/DisplayDocument?id=1909916">Create Better, Faster Enterprise Search With a Customized Open-Source Option</a></em>&nbsp;<i class="icon-external-link"><span>(External link)</span></i>, January 2012. In the report, Gartner notes that DigitalGov Search addresses the key aspects of designing a search system.</p>

<blockquote><p>Gartner identifies key stages of action in "Your Enterprise Search Project: The Outward Spiral." [DigitalGov Search] addressed them all:</p>

<ul>
<li><em>Staffing</em> the project with experts who had domain knowledge.</li>
<li><em>Scoping</em> the project using those personnel to satisfy search requirements for federal websites.</li>
<li><em>Selecting</em> the right technology.</li>
<li><em>Implementing</em> it effectively with workers who have the right skill sets.</li>
<li><em>Measuring</em> results as effectively as possible.</li>
</ul>
</blockquote>

    </div>

    <div class='tags'>
      
      <a href="/tagged/quote"><span class="label label-info">quote</span></a>
      
      <a href="/tagged/about-us"><span class="label label-info">about-us</span></a>
      
    </div>
   <div class='time'>
      
      
      
      </br><span>Page last reviewed or updated:</span>
      
      <a href="/quote/gartner.html">
        <time datetime="2012-03-14">March 14, 2012</time>
      </a>
    </div>
    </article>
  
  <article class='article'>
 
    
    <h1>
      <a href="/blog/award-big-data.html">DigitalGov Search Wins Government Big Data Solutions Award</a>
    </h1>
    

    <div class='post-content'>
      <p>DigitalGov Search (formerly USASearch) is the <a href="http://ctolabs.com/gsa-usasearch-wins-2011-government-big-data-solutions-award">winner of the 2011 Government Big Data Solutions Award</a>, announced at <a href="http://www.hadoopworld.com">Hadoop World</a> in New York City on November 8, 2011.</p>

<p>The <a href="http://ctolabs.com/big-data-award">Big Data Award</a> was established to highlight innovative solutions and to facilitate the exchange of best practices, lessons learned, and creative ideas for addressing Big Data challenges. The Award judges saw DigitalGov Search as a great example of solving Big Data problems to improve government agility and to provide better service for less.</p>

<p>In line with the GSA's cost-saving "build once, use many times" paradigm, DigitalGov Search provides hosted search services for <a href="http://www.usa.gov">USA.gov</a> and hundreds of other government websites. This is done in a cost-effective way, especially for the agencies involved, which receive these services at no cost.</p>

<p>From the Award presentation:</p>

<blockquote><p>The GSA is to be congratulated for their mission-focused, citizen-centered, open approach to a big data challenge and a resulting solution that improves the experience of a broad swath of users of federal services. On behalf of our judges and the many citizens who use this capability on a daily basis we say thank you, and congratulations on this well deserved recognition.</p></blockquote>

    </div>

    <div class='tags'>
      
      <a href="/tagged/analytics"><span class="label label-info">analytics</span></a>
      
      <a href="/tagged/about-us"><span class="label label-info">about-us</span></a>
      
    </div>
   <div class='time'>
      
      
      
      </br><span>Page last reviewed or updated:</span>
      
      <a href="/blog/award-big-data.html">
        <time datetime="2011-11-14">November 14, 2011</time>
      </a>
    </div>
    </article>
  
  <article class='article'>
 
    
    <h1>
      <a href="/blog/hadoop-rubyists.html">Hadoop for Rubyists</a>
    </h1>
    

    <div class='post-content'>
      <p>Is your MySQL groaning under too much data? Tired of waiting hours for analytics rake tasks?</p>

<p><a href="http://pivotallabs.com/talks/150-hadoop-for-rubyists"><img src="https://9fddeb862c037f6d2190-f1564c64756a8cfee25b6b19953b1d23.ssl.cf2.rackcdn.com/tumblr_luckbhCakH1qid15q.png" alt="Hadoop for Rubyists video" /></a></p>

<p><a href="http://pivotallabs.com/talks/150-hadoop-for-rubyists">Listen to Loren</a>, DigitalGov Search's senior technical architect, as he discusses how we leveraged our existing Ruby codebase by building Hadoop Map/Reduce jobs using Hive and plugging in our own Ruby mappers/reducers.</p>

    </div>

    <div class='tags'>
      
      <a href="/tagged/analytics"><span class="label label-info">analytics</span></a>
      
      <a href="/tagged/about-us"><span class="label label-info">about-us</span></a>
      
    </div>
   <div class='time'>
      
      
      
      </br><span>Page last reviewed or updated:</span>
      
      <a href="/blog/hadoop-rubyists.html">
        <time datetime="2011-11-09">November 9, 2011</time>
      </a>
    </div>
    </article>
  
  <article class='article'>
 
    
    <h1>
      <a href="/blog/award-informationweek.html">DigitalGov Search Wins InformationWeek Award</a>
    </h1>
    

    <div class='post-content'>
      <p><em>InformationWeek</em> yesterday <a href="http://www.informationweek.com/news/galleries/government/leadership/231600939">recognized 15 government agencies</a> for taking on ambitious IT initiatives in an effort to provide better services at a lower cost.</p>

<p>Former federal CIO Vivek Kundra talked often about the technology gap that separates government workers from private-sector employees. Federal, state, and local government agencies have many initiatives under way in an effort to close that gap.</p>

<p>They're employing cloud computing, software as a service, the Web, mobile technologies, and more to give government workers the tools they need to be more productive and to deliver public services more efficiently.</p>

<p>GSA's DigitalGov Search (formerly USASearch) was one of those honored by <em>InformationWeek</em> for making government services in English and in Spanish more accessible online with a revamped version of DigitalGov Search and its set of advanced search technologies for <a href="http://www.usa.gov">USA.gov</a>. Noted was our use of Microsoft's Bing Index, open source technologies such MySQL, Hadoop, and OpenCalais, and employing agile development to deliver new features quickly.</p>

<p><img src="https://9fddeb862c037f6d2190-f1564c64756a8cfee25b6b19953b1d23.ssl.cf2.rackcdn.com/tumblr_lrjk43Q2sP1qid15q.png" alt="Web results for a search on white house on USA.gov" /></p>

<p><img src="https://9fddeb862c037f6d2190-f1564c64756a8cfee25b6b19953b1d23.ssl.cf2.rackcdn.com/tumblr_lrjk5nzgYz1qid15q.png" alt="Image results for a search on white house on USA.gov" /></p>

<p>The award also cited our affiliate program which now includes hundreds of government websites that share our services and data through the platform. This affiliate program offers free search services to any federal, state, local, tribal, or territorial government agency. Affiliates can create a customized search experience that best fits their clients' needs through a simple, online administrative console.</p>

<p>Read about DigitalGov Search and the other InformationWeek award recipients at <a href="http://www.informationweek.com/news/galleries/government/leadership/231600939">http://www.informationweek.com/news/galleries/government/leadership/231600939</a></p>

    </div>

    <div class='tags'>
      
      <a href="/tagged/about-us"><span class="label label-info">about-us</span></a>
      
    </div>
   <div class='time'>
      
      
      
      </br><span>Page last reviewed or updated:</span>
      
      <a href="/blog/award-informationweek.html">
        <time datetime="2011-09-15">September 15, 2011</time>
      </a>
    </div>
    </article>
  
  <article class='article'>
 
    
    <h1>
      <a href="/blog/adopting-hadoop.html">Adopting Apache Hadoop in the Federal Government</a>
    </h1>
    

    <div class='post-content'>
      <h2>Background</h2>

<p>The United States federal government's DigitalGov Search program provides hosted search services for government affiliate organizations, shares APIs and web services, and operates the government's official search engine on <a href="http://www.usa.gov">USA.gov</a>. DigitalGov Search offers free search services to any federal, state, local, tribal, or territorial government agency. Several hundred websites make use of this service, ranging from the smallest municipality to larger federal sites like <a href="http://www.weather.gov">http://www.weather.gov</a> and <a href="http://www.usa.gov">http://www.usa.gov</a>. DigitalGov Search leverages the Bing API as the basis for its web results and then augments the user search experience by providing a variety of government-centric information such as related search topics and highlighted editorial content. The entire system is comprised of a suite of open-source tools and resources, including Apache Solr/Lucene, OpenCalais, and Apache Hadoop. Of these, our usage of Hadoop is the most recent. We began using <a href="http://www.cloudera.com/hadoop/">Cloudera's Distribution including Apache Hadoop</a>&nbsp;<i class="icon-external-link"><span>(External link)</span></i> (CDH3) for the first time in the Fall, and since then we've seen our usage grow every month&mdash;not just in scale, but in scope as well. But before highlighting everything DigitalGov Search is doing with Hadoop today, I should explain why we began using it in the first place.</p>

<h2>Phase 1: Search analytics</h2>

<p>All of the search and <a href="/manual/api.html">API</a> traffic across hundreds of affiliate sites, iPhone apps, and widgets comes through a single search service, and this generates a lot of data. To improve the service, administrators wanted to see aggregated information on what sorts of information searchers were looking for, how well they were finding it, what trends were forming, and so on. Once searches were initiated, they also wanted to know what results were shown and then what results were clicked on. They wanted to see all this information broken down by affiliate over time, and also aggregated across the entire affiliate landscape.</p>

<p>The initial system, like many initial systems, was fairly simple and did just enough to address our most pressing analytics needs. We took the logs from Apache and Ruby on Rails, put them in a big MySQL database on a separate machine, ran nightly and monthly jobs on them, and then exported the summary results to the main database cluster to be served up via a low-latency Rails web interface for analytics. We used a separate physical database machine with lots of memory and disk for the batch processing to keep our production MySQL instances from being impacted by this resource-intensive batch processing.</p>

<p><img src="https://9fddeb862c037f6d2190-f1564c64756a8cfee25b6b19953b1d23.ssl.cf2.rackcdn.com/tumblr_lle73iJ2Ts1qid15q.png" alt="Initial dataflow of raw logfiles to analytics apps" /></p>

<p>As we watched the main database tables grow and the nightly batch jobs take longer and longer, it became clear that we would soon exhaust the resources available on the single database analytics processing node. We looked at scaling up the hardware vertically and sharding the database horizontally, but both options seemed like we were just kicking the can down the road. Larger database hardware would be both costly and eventually insufficient for our needs, and sharding promised to take all the usual issues associated with a single database system (backups, master/slaves, schema management) and multiply them. We wanted the system to be able to grow cost effectively and without downtime, be naturally resilient to failures, and have backups handled sensibly. It was at this point that we started investigating HDFS, Hadoop, and Apache Hive.</p>

<p>HDFS offered us a distributed, resilient, and scalable filesystem while Hadoop promised to bring the work to where the data resided so we could make efficient use of local disk on multiple nodes. Hive, however, really pushed our decision in favor of a Hadoop-based system. Our data is just unstructured enough to make traditional RDBMS schemas a bit brittle and restrictive, but has enough structure to make a schema-less NoSQL system unnecessarily vague. Hive let us compromise between the two&mdash;it's sort of a "SomeSQL" system.</p>

<p>But best of all, we could layer the entire Cloudera stack on top of a subset of our existing production machines. By making use of each machine's excess reserve capacity of disk, CPU, and RAM, we were able to get a small proof-of-concept cluster stood up without purchasing any new hardware. The initial results confirmed that our workload lent itself well to distributed processing, as one job went from taking over an hour on a MySQL node to 20 minutes on a three machine Hadoop cluster. Within a week of getting the prototype up and running, we had transitioned all the remaining nightly analytics batch SQL jobs into Hive scripts. The job output fed into a collection of intermediate Hive tables, from which we generated summary data to export to MySQL as low-latency tables for the Rails web interface to use. To prove the scaling point, we spent five minutes adding another datanode/tasktracker to the mix, kicked off the cluster rebalancer, and the whole process ran faster the next day.</p>

<p><img src="https://9fddeb862c037f6d2190-f1564c64756a8cfee25b6b19953b1d23.ssl.cf2.rackcdn.com/tumblr_lle73rea1K1qid15q.png" alt="Current dataflow of raw logfiles to analytics apps" /></p>

<h2>Phase 2: Feedback loop</h2>

<p>The result of all this analysis in Hive shows up not just in various analytics dashboards, but as part of the search experience on many government websites, too. For example, compare the different type-ahead suggestions for '<strong>gran</strong>' on <a href="http://www.nps.gov">http://www.nps.gov</a> and <a href="http://www.usa.gov">http://www.usa.gov</a>. Both sites use the same DigitalGov Search backend system, but the suggestions differ completely. We use Hadoop to help us generate contextually relevant and timely search suggestions for hundreds of government sites like this.</p>

<p><img src="https://9fddeb862c037f6d2190-f1564c64756a8cfee25b6b19953b1d23.ssl.cf2.rackcdn.com/tumblr_lle73ymed31qid15q.png" alt="Different type-ahead suggestions on NPS.gov and USA.gov" /></p>

<h2>Phase 3: Internal monitoring</strong></h2>

<p>Shortly after moving our event stream analysis from MySQL to Hadoop/Hive, we noticed a change in how we thought about data. Freed from the constant anxiety of wondering how we were going to handle an ever-increasing amount of data, we shifted from trying to store only what we really needed to storing whatever we thought might be useful. We first turned our attention to the performance data emitted by the various sub-systems that make up the search program.</p>

<p>Each search results page is potentially made up of many data modules sintered together from calls to the Bing API, our own Solr indexes, a MySQL cluster, and a Redis cache. A small latency problem with any one of them can propagate through the system to create much larger problems, so we want to have a deep knowledge of how each subsystem behaves throughout the day under various circumstances. We were already monitoring the availability of all these services with Opsview, but we had no insight into their performance over time. Whenever we sensed a problem ("Is one of the Solr indexes getting slow?"), we would liberally apply ssh, tail -f, and grep to try to see what was going on. This seemed like a good use case for Hive, so in the case of Solr, for example, we threw the compressed log files into HDFS, wrote a simple SerDe regular expression to define rows in a Hive table partitioned by date, and built a view on top of that for easy manipulation of extracted columns such as the Solr index name and the hour of day. Hive makes it trivially easy to do some fairly sophisticated aggregate analysis on the response times for each Solr index, such as generating a distribution histogram, or calculating the pth percentile.</p>

<p>Some of these Hive queries are not run very often&mdash;perhaps just a few times a month&mdash;so we don't want to spend time building them into our test-driven Rails analytics framework. On the other hand, they are complex enough that we don't want to rewrite them every time we want to use them. For these cases, we use Beeswax in HUE to save off parameterized queries that can then be shared among engineers or analysts to run on an ad hoc basis.</p>

<h2>Conclusion</h2>

<p>In the space of a few months, we've gone from having a brittle and hard-to-scale RDBMS-based analytics platform to a much more agile Hadoop-based system that was designed to scale intrinsically. We continue to see our Hadoop usage grow in scope with each new data source we add, and it's clear that we'll be relying on it more and more in the future as the suite of tools and resources around Hadoop grows and matures.</p>

<p><strong><em>This post is cross-posted from <a href="http://www.cloudera.com/blog/2011/04/adopting-apache-hadoop-in-the-federal-government">Cloudera</a>&nbsp;<i class="icon-external-link"><span>(External link)</span></i>.</em></strong></p>

    </div>

    <div class='tags'>
      
      <a href="/tagged/analytics"><span class="label label-info">analytics</span></a>
      
      <a href="/tagged/about-us"><span class="label label-info">about-us</span></a>
      
    </div>
   <div class='time'>
      
      
      
      </br><span>Page last reviewed or updated:</span>
      
      <a href="/blog/adopting-hadoop.html">
        <time datetime="2011-06-16">June 16, 2011</time>
      </a>
    </div>
    </article>
  
</div>


<ul class="pager">
  

  
</ul>
<!-- end tag layout --></div>
</div>

<footer class="footer">
  <div class="container">
    <p><a href="mailto:search@support.digitalgov.gov">Email us</a>, call us at 202-505-5315, or follow <a href="http://www.twitter.com/dg_search">@DG_Search</a></p>
    <p> An Official Website of the U.S. Government <br />
      <a href="http://www.gsa.gov/portal/category/25729">Office of Citizen Services &amp; Innovative Technologies</a>, <a href="http://www.gsa.gov">U.S. General Services Administration</a>
    </p>
    <ul class="footer-links unstyled inline">
      <li><a href="http://www.usa.gov">USA.gov</a></li>
      <li class="muted">&bull;</li>
      <li><a href="/tos.html">Terms of Service</a></li>
      <li class="muted">&bull;</li>
      <li><a href="http://www.digitalgov.gov/about/policies/">Site Policies</a></li>
    </ul>
  </div>
</footer>

<script type="text/javascript">
  //<![CDATA[
  var usasearch_config = { siteHandle:"usasearch" };

  var script = document.createElement("script");
  script.type = "text/javascript";
  script.src = "http://search.usa.gov/javascripts/remote.loader.js";
  document.getElementsByTagName("head")[0].appendChild(script);

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-31302465-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
  //]]>
</script>


</body>
</html>
