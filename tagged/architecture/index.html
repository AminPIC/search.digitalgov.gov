<!DOCTYPE html>
<html lang="en">
<head>
  <meta name=viewport content="width=device-width, initial-scale=1">
  <meta charset="utf-8">
  <title>Posts tagged architecture</title>
  <meta name="description" content="">
  <meta name="author" content="">
  <link href="https://fonts.googleapis.com/css?family=Maven+Pro:400,700" media="screen" rel="stylesheet" type="text/css" />
  <link href="/bootstrap/css/bootstrap.css" rel="stylesheet">
  <link rel="stylesheet" href="/stylesheets/font-awesome.min.css">
  <!--[if IE 7]>
  <link rel="stylesheet" href="/stylesheets/font-awesome-ie7.min.css">
  <![endif]-->

  <!--<link href="../assets/css/bootstrap-responsive.css" rel="stylesheet">-->
  <link href="/stylesheets/custom.css" rel="stylesheet">

  <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
  <!--[if lt IE 9]>
  <script src="/javascripts/html5shiv.js"></script>
  <![endif]-->

  <!-- Fav and touch icons -->
  <!--  <link rel="apple-touch-icon-precomposed" sizes="144x144"
          href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114"
          href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72"
          href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">-->
  <link rel="shortcut icon" href="https://9fddeb862c037f6d2190-f1564c64756a8cfee25b6b19953b1d23.ssl.cf2.rackcdn.com/favicon.ico">
  <link rel='alternate' type='application/atom+xml' title='usasearch.howto.gov Atom feed' href='/all.atom' />
</head>

<body>
<nav class="navbar navbar-inverse navbar-fixed-top">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <a class="navbar-brand" href="/">
        <span class="digital">Digital</span><em>Gov</em></span>
        <span class="search">Search</span>
      </a>
    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">     
      
      <form class="navbar-form navbar-left form-search" accept-charset="UTF-8" action="http://find.digitalgov.gov/search/" id="search-form" method="get">
        <input name="affiliate" id="affiliate" type="hidden" value="usasearch">
        <div class="input-group input-append">
          <label for="search-query" class="hide">Query</label>      
          
          <input name="query" id="search-query" type="text" class="form-control search-query usagov-search-autocomplete" autocomplete="off" style="width:360px;">
          <span class="input-group-btn">
            <button type="submit" class="btn btn-primary" aria-label="Left Align" id="search-button">
              <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
            </button>
          </span>
        </div>
      </form>
      <ul class="nav navbar-nav navbar-right">
        <li>
          <a href="https://search.usa.gov/sites"><i
              class="icon-user icon-white"></i>&nbsp;Login</a>
        </li>        
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>


<div class="col-md-offset-2 col-md-8  hidden-sm hidden-md hidden-lg">

  <form class="form-search" accept-charset="UTF-8" action="http://find.digitalgov.gov/search/" id="search-form" method="get">
    <input name="affiliate" id="affiliate" type="hidden" value="usasearch">
    <div class="input-group input-append">
      <label for="search-query" class="hide">Query</label>      

      <input name="query" id="search-query" type="text" class="form-control search-query usagov-search-autocomplete" autocomplete="off" style="">
      <span class="input-group-btn">
        <button type="submit" class="btn btn-primary" aria-label="Left Align" id="search-button">
          <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
        </button>
      </span>
    </div>
  </form>
</div>

 

<div class="container-fluid">
  <div class="col-md-8 col-md-offset-2">
    <!-- do not remove as used to parse in usasearch -->
    <div id="main-container">    
      <!-- begin tag layout -->
<p class="muted">Posts tagged <strong>architecture</strong></p>

<div class='articles'>
  
  <article class='article'>
 
    
    <h1>
      <a href="/blog/cache.html">Cache Me If You Can</a>
    </h1>
    

    <div class='post-content'>
      <h2>Slowness Hurts Web Pages</h2>

<p>Have you ever been frustrated when visiting a web page that doesn't load quickly? Have you ever left a slow web page before it finished loading? You're not alone.</p>

<p>Several recent studies have quantified customers' frustration with slow web pages. Customers now  <a href="http://www.nytimes.com/2012/03/01/technology/impatient-web-users-flee-slow-loading-sites.html">expect results in the blink of an eye</a>.&nbsp;<i class="icon-external-link"><span>(External link)</span></i> This expection means that your <a href="http://www.aberdeen.com/Aberdeen-Library/5136/RA-performance-web-application.aspx">customers are won or lost in one second</a>.&nbsp;<i class="icon-external-link"><span>(External link)</span></i> A one second delay in loading a web page equals 11% fewer page views, 16% decrease in customer satisfaction, and 7% loss in conversions.</p>

<h2>Slowness <em>Kills</em> Search Results Pages</h2>

<p>As little time as web sites have to keep users on their pages, search engines have even less time to keep searchers on their results pages. Speed is the primary factor in determining customers' satisfaction with search results.</p>

<p>Google, Microsoft, and Yahoo garner <a href="http://www.comscore.com/Insights/Press_Releases/2013/11/comScore_Releases_October_2013_US_Search_Engine_Rankings">95% of the search market</a>.&nbsp;<i class="icon-external-link"><span>(External link)</span></i> Google garners two-thirds of the search market. The company's <a href="https://www.google.com/search?q=Google+Gospel+of+Speed">Gospel of Speed</a>&nbsp;<i class="icon-external-link"><span>(External link)</span></i> motto is one reason why Google garners the majority of the market.</p>

<p>This gospel has also set a high bar for all search engines. Searchers expect results pages to load very, very quickly.</p>

<h2>How We've Made Our Result Pages Load Faster</h2>

<p>So, when we established the service's open source architecture in 2010, the first thing we tackled was how to deliver our search results in under one second.</p>

<p>At around the same time, <a href="http://www.github.com">Github</a>&nbsp;<i class="icon-external-link"><span>(External link)</span></i> was experiencing exponential growth and the company's engineers were blogging about what they did to make Github fast. To get up to speed quickly (yes, bad pun intended), we read their posts.</p>

<ul>
<li><a href="https://github.com/blog/530-how-we-made-github-fast">How We Made GitHub Fast</a>&nbsp;<i class="icon-external-link"><span>(External link)</span></i>, October 20, 2009</li>
<li><a href="https://github.com/blog/1252-how-we-keep-github-fast">How We Keep GitHub Fast</a>&nbsp;<i class="icon-external-link"><span>(External link)</span></i>, September 5, 2012</li>
</ul>


<p>Leveraging some of Github's best practices, we succeeded in delivering our results in under 700 milliseconds, on average. This was a significant accomplishment and improvement from the previous vendor-owned and -operated iterations of our service.</p>

<p>Over the past three years, we've dug in and improved our response time even more. We now deliver our results in under 380 milliseconds, on average.</p>

<p><img src="https://9fddeb862c037f6d2190-f1564c64756a8cfee25b6b19953b1d23.ssl.cf2.rackcdn.com/serp_reponse_times.png" title="App server response times" alt="App server response times" /></p>

<p>We already had an architecture optimized for speed. So, how have we sped it up by 320 milliseconds?</p>

<h3>We Cache When We Can</h3>

<p>When a searcher enters a query, we go out to our various indexes, pull the information relevant to the searcher's request, and put that information together on the results page.</p>

<p>Most queries (such as jobs, obama, unclaimed money, forms) aren't unique and are asked by thousands of searchers each day.</p>

<p>We cache these so-called short head queries and store them on our servers. Caching helps us speed up the above process because searchers don't have to wait for us to pull the information from its original source.</p>

<h3>We Use an Asset Pipeline</h3>

<p>We have many JavaScript and CSS files on our results pages. These "assets" can be large and slow down the loading of our page. So, we use an <a href="http://guides.rubyonrails.org/asset_pipeline.html">asset pipeline</a>&nbsp;<i class="icon-external-link"><span>(External link)</span></i> to concatenate and compress our JavaScript and CSS assets thereby reducing the number of requests that a browser has to make to render our results page.</p>

<p>We also use fingerprinting&mdash;a technique that makes a file's name dependent on its content&mdash;within our asset pipeline. When the content changes, the name changes. For content that is static or that changes infrequently, this naming helps us tell whether two versions of a file are identical. When a filename is unique, browsers keep their own copy of the content. When the content is updated, the fingerprint changes so browsers request a new copy of the content. This approach allows us to maximize our content delivery network.</p>

<h3>We Use a Content Delivery Network</h3>

<p>Our static content (such as scripts and stylesheets) gets served through our <a href="http://www.webopedia.com/TERM/C/CDN.html">content delivery network</a>&nbsp;<i class="icon-external-link"><span>(External link)</span></i> provider, currently Akamai. Akamai serves our static content from its server that is geographically closest to the searcher. The closer, the faster.</p>

<p>Using a content delivery network also allow us to optimize our service's speed by:</p>

<ul>
<li>Directing non-cached traffic between our two datacenters to create a <a href="/releases/2012-10-19.html">multihomed environment</a>. Multihoming allows us to make full use of all of our servers. By contrast, in 2010, our disaster recovery datacenter often sat idle.</li>
<li>Reducing our need to add bandwidth or servers to handle short-term traffic spurts, such as spurts related to natural disasters.</li>
<li>Protecting against denial of service attacks by spotting them before they reach our servers.</li>
</ul>


<h2>What's Next?</h2>

<p>We've worked hard over the past three years to speed up the delivery of our results by optimizing each link in the chain.</p>

<p>We use several monitoring tools to measure our system's performance. The quality of these tools is improving at a rapid pace, which in turn, shows us where and how we can improve our service.</p>

<p>We regularly ask ourselves, "Will <em>this</em> shave some time off and help us deliver our results in <em>under</em> 380 milliseconds?"</p>

    </div>

    <div class='tags'>
      
      <a href="/tagged/cache"><span class="label label-info">cache</span></a>
      
      <a href="/tagged/architecture"><span class="label label-info">architecture</span></a>
      
      <a href="/tagged/about-us"><span class="label label-info">about-us</span></a>
      
    </div>
   <div class='time'>
      
      
      
      </br><span>Page last reviewed or updated:</span>
      
      
      <a href="/blog/cache.html">
        <time datetime="2013-12-09">December 9, 2013</time>
      </a>
    </div>
    </article>
  
</div>


<ul class="pager">
  

  
</ul>
<!-- end tag layout -->      
    </div>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p><a href="mailto:search@support.digitalgov.gov">Email us</a>, call us at 202-505-5315, or follow <a href="http://www.twitter.com/dg_search">@DG_Search</a></p>
    <p> An Official Website of the U.S. Government <br />
      <a href="http://www.gsa.gov/portal/category/25729">Office of Citizen Services &amp; Innovative Technologies</a>, <a href="http://www.gsa.gov/portal/category/100000">U.S. General Services Administration</a>
    </p>
    <ul class="footer-links list-unstyled list-inline">
      <li><a href="http://www.usa.gov">USA.gov</a></li>
      <li class="muted">&bull;</li>
      <li><a href="/tos.html">Terms of Service</a></li>
      <li class="muted">&bull;</li>
      <li><a href="http://www.digitalgov.gov/about/policies/">Site Policies</a></li>
      <li class="muted">&bull;</li>
      <li><a href="/developer/">Developers</a></li>
    </ul>
  </div>
</footer>

<script type="text/javascript">
  //<![CDATA[
  var usasearch_config = { siteHandle:"usasearch" };

  var script = document.createElement("script");
  script.type = "text/javascript";
  script.src = "http://search.usa.gov/javascripts/remote.loader.js";
  document.getElementsByTagName("head")[0].appendChild(script);

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-31302465-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
  //]]>
</script>


</body>
</html>
